name: Test Workflow Dispatch

on:
  workflow_dispatch:
    inputs:
      test_message:
        description: 'Test message to display'
        required: true
        default: 'Hello from workflow dispatch!'
        type: string
      run_tests:
        description: 'Run tests'
        required: false
        default: true
        type: boolean

jobs:
  test-dispatch:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Display test message
      run: |
        echo "ğŸ‰ Workflow dispatch is working!"
        echo "ğŸ“ Test message: ${{ inputs.test_message }}"
        echo "ğŸ§ª Run tests: ${{ inputs.run_tests }}"
        echo "ğŸ“… Triggered at: $(date)"
        echo "ğŸ‘¤ Triggered by: ${{ github.actor }}"
        echo "ğŸŒ¿ Branch: ${{ github.ref_name }}"

    - name: Run basic tests
      if: inputs.run_tests
      run: |
        echo "Running basic validation tests..."
        echo "âœ… Node.js version: $(node --version)"
        echo "âœ… NPM version: $(npm --version)"
        echo "âœ… Package.json exists: $(test -f package.json && echo 'Yes' || echo 'No')"
        echo "âœ… Source directory exists: $(test -d src && echo 'Yes' || echo 'No')"

    - name: Test completion
      run: |
        echo "ğŸ¯ Test workflow dispatch completed successfully!"
        echo "âœ… All tests passed!"
